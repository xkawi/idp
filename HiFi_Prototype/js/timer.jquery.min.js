/*! timer.jquery 0.1.0 2014-02-18*/(function(s){var t=function(t,i){var e={action:"start",editable:!0};this.options=s.extend(e,i),this.$el=s(t),this.init()};t.prototype.init=function(){this.secsNum=0,this.minsNum=0,this.hrsNum=0,this.secsStr="0 sec",this.minsStr="",this.hrsStr="",this.timerId=null,this.delay=1e3,this.isTimerRunning=!1,void 0!==this.options.seconds&&(this.hrsNum=Math.floor(this.options.seconds/3600),this.minsNum=Math.floor((this.options.seconds-3600*this.hrsNum)/60),this.secsNum=this.options.seconds-3600*this.hrsNum-60*this.minsNum,this.timeToString()),this.elType=this.$el.prop("tagName").toLowerCase(),this.options.editable&&this.initEditable()},t.prototype.start=function(){this.isTimerRunning||(this.updateTimerDisplay(),this.incrementTime(),this.startTimerInterval())},t.prototype.pause=function(){clearInterval(this.timerId),this.isTimerRunning=!1},t.prototype.resume=function(){this.isTimerRunning||this.startTimerInterval()},t.prototype.startTimerInterval=function(){var s=this;this.timerId=setInterval(function(){s.incrementTime()},this.delay),this.isTimerRunning=!0},t.prototype.initEditable=function(){var t=this;this.$el.on("focus",function(){t.pause()}),this.$el.on("blur",function(){var i;i="input"==t.elType||"textarea"==t.elType?s(this).val().replace(/\s+/,""):s(this).html().replace(/\s+/,"");var e=/\d+sec/,n=/\d+\:\d+min/,m=/\d+\:\d+\:\d+/;if(i.match(e))t.secsNum=parseInt(i.replace(/sec/,""),10)+1,t.secsNum>59&&(t.secsNum=0,t.minsNum++);else if(i.match(n)){i=i.replace(/min/,"");var h=i.split(":");t.minsNum=parseInt(h[0],10),t.secsNum=parseInt(h[1],10)+1,t.secsNum>59&&(t.secsNum=0,t.minsNum++),t.minsNum>59&&(t.minsNum=0,t.hrsNum++)}else if(i.match(m)){var h=i.split(":");t.hrsNum=parseInt(h[0],10),t.minsNum=parseInt(h[1],10),t.secsNum=parseInt(h[2],10)+1,t.secsNum>59&&(t.secsNum=0,t.minsNum++),t.minsNum>59&&(t.minsNum=0,t.hrsNum++)}t.resume()})},t.prototype.updateTimerDisplay=function(){var s;s=0==this.hrsNum?60>this.secsNum&&0==this.minsNum?this.secsStr+" sec":this.minsStr+":"+this.secsStr+" min":this.hrsStr+":"+this.minsStr+":"+this.secsStr,"input"==this.elType||"textarea"==this.elType?this.$el.val(s):this.$el.html(s),this.$el.data("seconds",this.get_seconds())},t.prototype.timeToString=function(){this.secsStr=(this.minsNum>0||this.hrsNum>0)&&10>this.secsNum?"0"+this.secsNum:this.secsNum,this.minsStr=this.hrsNum>0&&10>this.minsNum?"0"+this.minsNum:this.minsNum,this.hrsStr=this.hrsNum},t.prototype.get_seconds=function(){return 3600*this.hrsNum+60*this.minsNum+this.secsNum},t.prototype.incrementTime=function(){this.timeToString(),this.updateTimerDisplay(),this.secsNum++,0==this.secsNum%60&&(this.minsNum++,this.secsNum=0),this.minsNum>59&&0==this.minsNum%60&&(this.hrsNum++,this.minsNum=0)};var i="timer";s.fn[i]=function(e){return this.each(function(){s.data(this,"plugin_"+i)instanceof t||s.data(this,"plugin_"+i,new t(this,e));var n=s.data(this,"plugin_"+i);"string"==typeof e&&"function"==typeof n[e]&&n[e].call(n)})}})(jQuery);